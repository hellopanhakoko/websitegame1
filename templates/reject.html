<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Transaction Receipts</title>
  <style>
    body { font-family:sans-serif; background:#1f1c2c; color:#fff; padding:20px;}
    .card { background: rgba(255,255,255,0.06); padding:16px; border-radius:12px; margin-bottom:12px;}
    h3 { margin-top:0;}
    button { padding:8px 12px; border:none; border-radius:6px; cursor:pointer; background:#7f5cff; color:#fff;}
  </style>
</head>
<body>
  <h1>Completed Transactions</h1>
  {% for id, tx in rejects.items() %}
    <div class="card">
      <h3>Order: {{ id }}</h3>
      <p>Game: {{ tx.game }}</p>
      <p>Server ID: {{ tx.server_id }}</p>
      <p>Zone ID: {{ tx.zone_id }}</p>
      <p>Item: {{ tx.item_id }}</p>
      <p>Transaction Code: {{ tx.tran_code }}</p>
      <p>Amount: ${{ tx.amount }}</p>
      <button onclick="saveReceipt('{{ id }}')">Save Receipt</button>
    </div>
  {% endfor %}

<script>
function saveReceipt(orderId) {
  const card = document.querySelector(`.card:has(h3:contains('${orderId}'))`);
  const text = card.innerText;
  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = `receipt_${orderId}.txt`;
  a.click();
  URL.revokeObjectURL(url);
}
</script>
</body>
</html>
